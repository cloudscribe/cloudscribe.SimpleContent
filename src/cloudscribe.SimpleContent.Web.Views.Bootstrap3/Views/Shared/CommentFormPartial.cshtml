@model cloudscribe.SimpleContent.Web.ViewModels.BlogViewModel
@using cloudscribe.SimpleContent.Models
@using cloudscribe.SimpleContent.Web


@{
    var path = Url.Action("AjaxPostComment", "Blog");
    var isAuthenticated = Context.User.Identity.IsAuthenticated;
    var showRecaptcha = (Model.ProjectSettings.RecaptchaPublicKey.Length > 0) && !isAuthenticated;
}
<form id="commentform" role="form" asp-antiforgery="true" class="form-horizontal" data-blog-path="@path">
    <fieldset>
        <legend>Post comment</legend>

        <div class="form-group row">
            <label for="commentname" class="control-label col-sm-2">Name</label>
            <div class="col-sm-7">
                <input id="commentname" class="form-control" type="text" placeholder="Name" required />
            </div>
        </div>
        <div class="form-group row">
            <label for="commentemail" class="control-label col-sm-2">Email</label>
            <div class="col-sm-7">
                <input id="commentemail" class="form-control" type="email" placeholder="Email" required />
            </div>
        </div>
        <div class="form-group row">
            <label for="commenturl" class="control-label col-sm-2">Website</label>
            <div class="col-sm-7">
                <input id="commenturl" class="form-control" type="url" placeholder="Website URL" />
            </div>
        </div>
        <div class="form-group row">
            <label for="commentcontent" class="control-label col-sm-2">Comment (no HTML allowed)</label>
            <div class="col-sm-10">
                <textarea id="commentcontent" class="form-control" rows="4" placeholder="Comment" required></textarea>
            </div>
        </div>
        @if (showRecaptcha)
        {
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <div class="g-recaptcha" data-sitekey="@Model.ProjectSettings.RecaptchaPublicKey"></div>
                    @Html.ValidationMessage("recaptchaerror", new { @class = "text-danger" })
                </div>
            </div>

        }
        <div class="form-group row">
            <div class="col-sm-offset-2 col-sm-10">
                <input name="postId2" type="hidden" value="@Model.CurrentPost.Id" />
                <button class="btn btn-primary">Post comment</button>
                <span id="status" class="alert" role="status" aria-live="polite"></span>
            </div>
        </div>
    </fieldset>
</form>
